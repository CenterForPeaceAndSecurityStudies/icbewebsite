---
title: 'CrisisEvents.org - High Quality International Relations Event Data'
output:
  html_document:
    toc: no
    self_contained: no
    lib_dir: 'lib'
---

<style>
    body .main-container {
        max-width: 1500px;
    }
</style>



```{js, class.source = "jsvis1", echo=F}
window.twttr = (function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0],
    t = window.twttr || {};
  if (d.getElementById(id)) return t;
  js = d.createElement(s);
  js.id = id;
  js.src = "https://platform.twitter.com/widgets.js";
  fjs.parentNode.insertBefore(js, fjs);

  t._e = [];
  t.ready = function(f) {
    t._e.push(f);
  };

  return t;
}(document, "script", "twitter-wjs"));
```
<a class="twitter-share-button" href="https://twitter.com/intent/tweet?text=Hello%20world">Tweet</a>

Nations compete in chess matches for conquest and survival. A multi-university team of social scientists examined 470 of these crises in detail, recording them move for move (over 10,000 in total).

You can browse timelines and read narratives of those crises below - pick a decade, year, and crisis. Compare our contribution, the International Crisis Behavior events dataset (ICBe), to the previous state of the art, and then read the [paper and download the data](https://github.com/CenterForPeaceAndSecurityStudies/ICBEdataset) for yourself.


```{r setup, include=FALSE, echo=F, results='hide',  include=T, message=F, cache=F, warning=F}

#PhantomJS not found. You can install it with webshot::install_phantomjs(). If it is installed, please make sure the phantomjs executable can be found via the PATH variable.
#webshot::install_phantomjs()

source('/mnt/8tb_a/rwd_github_private/icbe/docs/maps.r')


#On how to reset the repo to save space
#https://github.com/18F/C2/issues/439

knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)

icb_crises <-readRDS(paste0(here::here(), "/docs/icb1v14.Rds") )

icb_crises$decade <- floor(icb_crises$yrtrig/10)*10
icb_crises$decade_5 <- icb_crises$decade  + (icb_crises$yrtrig %% 10 > 5)*5

fromscratch=F
library(glue)
n <- 476
chunk <- function(x,n) split(x, factor(sort(rank(x)%%n)))
chunks <- chunk(1:n,30)

df <- sapply(chunks, range) %>% t() %>% as.data.frame() %>%
  mutate(filenames_html = glue("ICBe_Website_Cases_{V1}to{V2}.html")) %>%
  mutate(filenames_rmd = glue("/mnt/8tb_a/rwd_github_private/icbe/docs/ICBe_Website_Cases_{V1}to{V2}.rmd")) %>%
  mutate(link = glue("[{V1}-{V2}](ICBe_Website_Cases_{V1}to{V2}.html);"))


```



```{r, echo=F, results='asis',  include=T, message=F, cache=F, warning=F}

#cat("Decade\n")
cat('\n\n# {.tabset .tabset-fade .tabset-pills}\n\n') #Start tabs for decades
cat('\n\n## Decade: {.tabset .tabset-fade .tabset-pills} \n\n')
cat("\n\n Select a Decade\n\n")
for(d in na.omit(unique(icb_crises$decade))){ #for debuging can limit it to just 2 decades #[1:2]
  
  #Start tab for Deacde
  if( d==1960){ cat('\n\n## ', d , ' {.active .tabset .tabset-fade .tabset-pills}\n\n') } else {
    cat('\n\n## ', d , ' {.tabset .tabset-fade .tabset-pills} \n\n' )  
  }

  #Start tab for Year
  #cat("Year\n")
  cat('\n\n### Year: {.tabset .tabset-fade .tabset-pills} \n\n')
  cat("\n\n Select a Year\n\n")
  for(year in icb_crises %>% filter(decade %in% d) %>% pull(yrtrig) %>% unique() ) {
    if( year==1962){ cat('\n\n### ', year , ' {.active .tabset .tabset-fade .tabset-pills}\n\n') } else {
      cat('\n\n### ', year , ' {.tabset .tabset-fade .tabset-pills}\n\n' )  
    }  

    cat('\n\n#### Crisis: {.tabset .tabset-fade .tabset-pills} \n\n')
    cat("\n\n Select a Crisis \n\n")
    for(crisis in icb_crises %>% filter(yrtrig %in% year) %>% pull(crisno) ) { 
      map(crisis, fromscratch=fromscratch)
    }
  #cat('\n\n## {-}\n\n') #Close tab for cases
  }
}
cat('\n\n# {-}\n\n') #Close tab for decades

```
